<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <title>
      packages/privoxy – Freetz
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/search" />
        <link rel="help" href="../TracGuide.html" />
        <link rel="alternate" href="privoxy%3Fformat=txt" type="text/x-trac-wiki" title="Reiner Text" />
        <link rel="up" href="../packages.html" title="Übergeordnete Wiki-Seite anzeigen" />
        <link rel="start" href="/wiki" />
        <link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/phrases.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes-300.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes-narrow-toc.css" type="text/css" /><link rel="stylesheet" href="../../wikicss.css" type="text/css" /><link rel="stylesheet" href="../../chrome/tags/css/tractags.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikinegotiator/css/langmenu-ctxnav.css" type="text/css" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Freetz durchsuchen" />
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/messages/de.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/folding.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="/wiki"><img src="../../chrome/common/freetz_motd.png" alt="Freetz" /></a>
      </div>
      <form id="search" action="https://www.google.com/search" method="get" onsubmit="; this.elements.namedItem('q').value = this.elements.namedItem('oq').value + ' site:freetz.github.io'">
        <div>
          <label for="proj-search">Suche:</label>
          <input type="text" id="proj-search" name="oq" size="18" value="" />
          <input type="hidden" name="q" value="" />
          <input type="submit" value="Suche" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><li class="last"><a href="../Impressum.html">Impressum</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/wiki">Wiki</a></li><li><a href="https://github.com/Freetz/freetz/commits/master">Quellen durchsehen</a></li><li class="last"><a href="/screenshots">Bildschirmfotos</a></li>
    </ul>
  </div>
    <div id="langmenu"><ul><li class="first"><span title="Select a language of wiki content">Language:</span></li><li class=" active"><a class="" href="privoxy.html" title="displaying language (default)">German</a></li><li class=" last"><a class=" notexist" href="/wiki/packages/privoxy.en" title="(not available)">English</a></li></ul></div><p /><div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="Zeige WikiStart an" href="/wiki">Wiki:</a><a class="pathentry" href="../packages.html" title="Zeige packages an">packages</a><span class="pathentry sep">/</span><a class="pathentry" href="privoxy.html" title="Zeige packages/privoxy an">privoxy</a>
</div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">

          <div id="wikipage" class="trac-content"><p>
</p><div class="wiki-toc"><h4>Inhaltsverzeichnis</h4><ol><li><a href="privoxy.html#FilterundAktionen">Filter und Aktionen</a></li><li><a href="privoxy.html#Zugriffskontrolle">Zugriffskontrolle</a></li><li><a href="privoxy.html#PrivoxyundTor">Privoxy und Tor</a></li><li><a href="privoxy.html#TransparenterProxy">Transparenter Proxy</a></li><li><a href="privoxy.html#Werbefilter">Werbefilter</a></li><li><a href="privoxy.html#Installation">Installation</a></li><li><a href="privoxy.html#Diskussion">Diskussion</a></li></ol></div><p>
</p>
<h1 id="Privoxy">Privoxy</h1>
<p>
<a class="ext-link" href="http://www.privoxy.org"><span class="icon">​</span>Privoxy</a> ist ein HTTP Proxy mit umfangreichen Filtermöglichkeiten zum <strong>Schutz der Privatsphäre</strong> und zum Filtern von Webseiten-Inhalten: Privoxy <strong>entfernt Werbung und Popups</strong>, bietet eine vollständig konfigurierbare <strong>Zugriffskontrolle</strong> auf das Internet ("Kindersicherung") sowie die Verwaltung und Kontrolle von Cookies.
</p>
<p>
Das Privoxy Paket enthält neben einem vorkompilierten Privoxy mitsamt Standardkonfiguration vordefinierte Standard-Filter sowie ein Webfrontend zur Konfiguration. Das nachstehende Bild zeigt die Version ab Revision 2938 (neu hinzugekommen sind die Optionen enable-remote-toggle und enforce-blocks)
</p>
<p>
<figure><img src="/screenshots/11.png" alt="Privoxy Configuration since Rev. 2938" /><figcaption>Privoxy Configuration since Rev. 2938</figcaption></figure>
</p>
<h2 id="FilterundAktionen">Filter und Aktionen</h2>
<p>
Eine detailierte Beschreibung der mächtigen und umfangreichen Filter-Funktionen liefert das <a class="ext-link" href="http://www.privoxy.org/user-manual/"><span class="icon">​</span>Privoxy Benutzerhandbuch</a> in den Kapiteln <a class="ext-link" href="http://www.privoxy.org/user-manual/filter-file.html"><span class="icon">​</span>Filter Files</a> und <a class="ext-link" href="http://www.privoxy.org/user-manual/actions-file.html"><span class="icon">​</span>Actions Files</a> (englisch).
</p>
<h2 id="Zugriffskontrolle">Zugriffskontrolle</h2>
<p>
Die Privoxy Zugriffskontrolle ist über das Freetz Webinterface steuerbar. Eine detailierte Beschreibung dazu findet man ebenfalls im <a class="ext-link" href="http://www.privoxy.org/user-manual/"><span class="icon">​</span>Privoxy Benutzerhandbuch</a> im Kapitel <a class="ext-link" href="http://www.privoxy.org/user-manual/config.html#ACCESS-CONTROL"><span class="icon">​</span>Zugriffskontrolle</a> (englisch).
</p>
<h2 id="PrivoxyundTor">Privoxy und Tor</h2>
<p>
Privoxy ist auch ideal für die Verwendung zusammen mit <a class="wiki" href="tor.html">Tor</a>, um anonym und sicher im Internet surfen zu können.
</p>
<p>
Dazu muss in der Privoxy Konfiguration der Port und der IP-Adresse des Tor Proxy Servers angeben werden. Wenn der Tor Proxy auf der selben Fritzbox läuft, so kann man z.B. <em>127.0.0.1:9050</em> eintragen.
</p>
<h2 id="TransparenterProxy">Transparenter Proxy</h2>
<p>
In manchen Fällen ist es gewünscht, dass jeglicher Webtraffic durch den Proxy geleitet wird und so ohne Konfiguration auf dem Client-PC zu filtern. Dazu wird zusätzlich <a class="wiki" href="iptables.html">Iptables</a> mit den Modulen <strong>ip_tables</strong>, <strong>iptable_filter</strong>, <strong>x_tables</strong>, <strong>xt_tcpudp</strong>, <strong>ipt_REDIRECT</strong>, <strong>ip_nat</strong> und <strong>iptable_nat</strong> benötigt.<br />
</p>
<p>
Um die Umleitung zu aktivieren folgendes ausführen (Konsole oder rc.custom):
</p>
<pre class="wiki">modprobe ip_tables
modprobe iptable_filter
modprobe x_tables
modprobe xt_tcpudp
modprobe ipt_REDIRECT
modprobe ip_nat
modprobe iptable_nat
iptables -t nat -A PREROUTING -p tcp -i lan --dport 80 -j REDIRECT --to 8118
[ -z "$(grep accept-intercepted-requests /var/mod/etc/privoxy/config)" ] &amp;&amp; echo "accept-intercepted-requests 1" &gt;&gt; /var/mod/etc/privoxy/config
</pre><h2 id="Werbefilter">Werbefilter</h2>
<p>
Um den Privoxy als Werbefilter zu nutzen ist es notwendig eine aktuelle und gute Filterliste zu haben. Um die Daten nicht selbst pflegen zu müssen ist es hilfreich beispielsweise auf die Filterlisten des Firefox-Plugins AdBlockPlus zuzugreifen.<br /> Da diese Listen ziemlich groß sind, wird es im Flashspeicher der Fritz.Box etwas eng. Deswegen ist es nützliche die Listen beim Start der Fritz.Box neu zu laden.
</p>
<pre class="wiki">URL="http://adblockplus.mozdev.org/easylist/easylist.txt"
ACTION=/var/tmp/flash/privoxy/user.action
FILTER=/var/tmp/flash/privoxy/user.filter
FILE=$(basename ${URL})
LIST=${FILE%\.*}
wget -qO ${FILE} ${URL}
echo -e "{ +block{${LIST}} }" &gt; ${ACTION}
sed '/^!.*/d;1,1 d;/^@@.*/d;/\$.*/d;/#/d;s/\./\\./g;s/\?/\\?/g;s/\*/.*/g;s/(/\\(/g;s/)/\\)/g;s/\[/\\[/g;s/\]/\\]/g;s/\^/[\/\&amp;:\?=_]/g;s/^||/\./g;s/^|/^/g;s/|$/\$/g;/|/d' ${FILE} &gt;&gt; ${ACTION}
echo "FILTER: ${LIST} Tag filter of ${LIST}" &gt; ${FILTER}
sed '/^#/!d;s/^##//g;s/^#\(.*\)\[.*\]\[.*\]*/s|&lt;([a-zA-Z0-9]+)\\s+.*id=.?\1.*&gt;.*&lt;\/\\1&gt;||g/g;s/^#\(.*\)/s|&lt;([a-zA-Z0-9]+)\\s+.*id=.?\1.*&gt;.*&lt;\/\\1&gt;||g/g;s/^\.\(.*\)/s|&lt;([a-zA-Z0-9]+)\\s+.*class=.?\1.*&gt;.*&lt;\/\\1&gt;||g/g;s/^a\[\(.*\)\]/s|&lt;a.*\1.*&gt;.*&lt;\/a&gt;||g/g;s/^\([a-zA-Z0-9]*\)\.\(.*\)\[.*\]\[.*\]*/s|&lt;\1.*class=.?\2.*&gt;.*&lt;\/\1&gt;||g/g;s/^\([a-zA-Z0-9]*\)#\(.*\):.*[:[^:]]*[^:]*/s|&lt;\1.*id=.?\2.*&gt;.*&lt;\/\1&gt;||g/g;s/^\([a-zA-Z0-9]*\)#\(.*\)/s|&lt;\1.*id=.?\2.*&gt;.*&lt;\/\1&gt;||g/g;s/^\[\([a-zA-Z]*\).=\(.*\)\]/s|\1^=\2&gt;||g/g;s/\^/[\/\&amp;:\?=_]/g;s/\.\([a-zA-Z0-9]\)/\\.\1/g' ${FILE} &gt;&gt; ${FILTER}
echo "{ +filter{${LIST}} }" &gt;&gt; ${ACTION}
echo "*" &gt;&gt; ${ACTION}
echo "{ -block }" &gt;&gt; ${ACTION}
sed '/^@@.*/!d;s/^@@//g;/\$.*/d;/#/d;s/\./\\./g;s/\?/\\?/g;s/\*/.*/g;s/(/\\(/g;s/)/\\)/g;s/\[/\\[/g;s/\]/\\]/g;s/\^/[\/\&amp;:\?=_]/g;s/^||/\./g;s/^|/^/g;s/|$/\$/g;/|/d' ${FILE} &gt;&gt; ${ACTION}
echo "{ -block +handle-as-image }" &gt;&gt; ${ACTION}
sed '/^@@.*/!d;s/^@@//g;/\$.*image.*/!d;s/\$.*image.*//g;/#/d;s/\./\\./g;s/\?/\\?/g;s/\*/.*/g;s/(/\\(/g;s/)/\\)/g;s/\[/\\[/g;s/\]/\\]/g;s/\^/[\/\&amp;:\?=_]/g;s/^||/\./g;s/^|/^/g;s/|$/\$/g;/|/d' ${FILE} &gt;&gt; ${ACTION}
</pre><p>
Nähere Infos unter: <a class="ext-link" href="http://andrwe.org/doku.php/scripting/bash/privoxy-blocklist"><span class="icon">​</span>http://andrwe.org/doku.php/scripting/bash/privoxy-blocklist</a>
</p>
<p>
If you want to store the action and filter file external in stead of flash:
</p>
<pre class="wiki">ACTION=/var/media/ftp/uFlash/privoxy/user.action
FILTER=/var/media/ftp/uFlash/privoxy/user.filter
</pre><pre class="wiki">rm /tmp/flash/privoxy/user.filter
rm /tmp/flash/privoxy/user.action
ln -s /var/media/ftp/uFlash/privoxy/user.filter /tmp/flash/privoxy/user.filter
ln -s /var/media/ftp/uFlash/privoxy/user.action /tmp/flash/privoxy/user.action
modsave
</pre><h2 id="Installation">Installation</h2>
<p>
Das Paket kann während der <a class="wiki" href="../help/howtos/common/install.html">Freetz-Installation</a> einfach mit ausgewählt werden, und wird somit Bestandteil der selbstgebauten Firmware.
</p>
<h2 id="Diskussion">Diskussion</h2>
<p>
Fragen und Anmerkungen zu diesem Paket werden in <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=115778"><span class="icon">​</span>diesem Thread</a> diskutiert.
</p>
</div>

      </div><ul class="tags"><li class="header">Tags</li><li><a href="/tags/daemons" rel="tag">daemons</a> </li><li><a href="/tags/network" rel="tag">network</a> </li><li><a href="../packages.html" rel="tag">packages</a> </li><li><a href="/tags/privacy" rel="tag">privacy</a> </li><li><a href="/tags/proxy" rel="tag">proxy</a> </li><li><a href="/tags/server" rel="tag">server</a> </li><li><a href="/tags/transparent" rel="tag">transparent</a> </li><li><a href="/tags/werbung" rel="tag">werbung</a> </li></ul>

    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/chrome/screenshots/css/screenshots.css", "text/css");
    </script>
    </div>
  </body>
</html>
